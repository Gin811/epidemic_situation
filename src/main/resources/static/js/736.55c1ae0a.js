"use strict";(self["webpackChunkepidemic_management_vue"]=self["webpackChunkepidemic_management_vue"]||[]).push([[736],{7736:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),i("el-breadcrumb-item",[e._v("每日健康管理")]),i("el-breadcrumb-item",[e._v("健康登记")])],1),i("el-card",[i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:8}},[i("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:e.getRegisterList},model:{value:e.queryInfo.username,callback:function(t){e.$set(e.queryInfo,"username",t)},expression:"queryInfo.username"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getRegisterList},slot:"append"})],1)],1),i("el-col",{attrs:{span:5}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加记录")]),i("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.batchDelete(e.tableChecked)}}},[e._v("批量删除")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.RegisterList,"cell-style":e.rowClass,"header-cell-style":e.headClass,"row-style":e.rowStyle,"row-class-name":e.rowStyle,border:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{label:"姓名",prop:"name"}}),i("el-table-column",{attrs:{label:"电话",prop:"phone",width:"105px"}}),i("el-table-column",{attrs:{label:"所在地",prop:"szd",width:"83px"}}),i("el-table-column",{attrs:{label:"体温",prop:"tw"}}),i("el-table-column",{attrs:{label:"身体状况",prop:"stzk"}}),i("el-table-column",{attrs:{label:"是否与感染者接触",prop:"grjc",width:"80px"}}),i("el-table-column",{attrs:{label:"近14天",prop:"fourteenDay","show-overflow-tooltip":!0,width:"145"}}),i("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"140px"}}),i("el-table-column",{attrs:{label:"备注说明","show-overflow-tooltip":!0,prop:"bz"}}),i("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-start"}},[i("el-button",{attrs:{circle:"",icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(i){return e.editRegister(t.row)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{content:"删除",effect:"dark",placement:"top-start"}},[i("el-button",{attrs:{circle:"",icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(i){return e.deleteRegister(t.row.id)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{content:"转为隔离",effect:"dark",placement:"top-start"}},[e._v(" < "),i("el-button",{attrs:{circle:"",icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(i){return e.addDivide(t.row)}}})],1)]}}])})],1),i("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-size":e.queryInfo.pageSize,"page-sizes":[5,8,10,12,15],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),i("el-dialog",{attrs:{visible:e.addVisible,title:"添加用户",width:"35%"},on:{"update:visible":function(t){e.addVisible=t},close:e.closeAddDialog}},[i("el-form",{ref:"addFormRef",staticClass:"demo-user",attrs:{model:e.Register,rules:e.mobileFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{model:{value:e.Register.name,callback:function(t){e.$set(e.Register,"name",t)},expression:"Register.name"}})],1),i("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[i("el-input",{model:{value:e.Register.phone,callback:function(t){e.$set(e.Register,"phone",t)},expression:"Register.phone"}})],1),i("el-form-item",{attrs:{label:"所在地",prop:"szd"}},[i("el-input",{model:{value:e.Register.szd,callback:function(t){e.$set(e.Register,"szd",t)},expression:"Register.szd"}})],1),i("el-form-item",{attrs:{label:"体温",prop:"tw"}},[i("el-input",{model:{value:e.Register.tw,callback:function(t){e.$set(e.Register,"tw",t)},expression:"Register.tw"}})],1),i("el-form-item",{attrs:{label:"身体状况",prop:"stzk"}},[i("el-input",{model:{value:e.Register.stzk,callback:function(t){e.$set(e.Register,"stzk",t)},expression:"Register.stzk"}})],1),i("el-form-item",{staticClass:"ellabel",staticStyle:{"line-height":"20px"},attrs:{label:"是否与感染者接触",prop:"grjc"}},[i("el-input",{model:{value:e.Register.grjc,callback:function(t){e.$set(e.Register,"grjc",t)},expression:"Register.grjc"}})],1),i("el-form-item",{attrs:{label:"近14天",prop:"fourteenDay"}},[i("el-input",{model:{value:e.Register.fourteenDay,callback:function(t){e.$set(e.Register,"fourteenDay",t)},expression:"Register.fourteenDay"}})],1),i("el-form-item",{attrs:{label:"备注说明",prop:"bz"}},[i("el-input",{model:{value:e.Register.bz,callback:function(t){e.$set(e.Register,"bz",t)},expression:"Register.bz"}})],1),i("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[i("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"选择日期时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Register.createTime,callback:function(t){e.$set(e.Register,"createTime",t)},expression:"Register.createTime"}})],1)],1),i("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addRegister}},[e._v("确 定")])],1),i("el-dialog",{attrs:{visible:e.editVisible,title:"修改信息",width:"35%"},on:{"update:visible":function(t){e.editVisible=t},close:e.closeEditDialog}},[i("el-form",{ref:"editFormRef",staticClass:"demo-user",attrs:{model:e.Register,rules:e.mobileFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{model:{value:e.Register.name,callback:function(t){e.$set(e.Register,"name",t)},expression:"Register.name"}})],1),i("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[i("el-input",{model:{value:e.Register.phone,callback:function(t){e.$set(e.Register,"phone",t)},expression:"Register.phone"}})],1),i("el-form-item",{attrs:{label:"所在地",prop:"szd"}},[i("el-input",{model:{value:e.Register.szd,callback:function(t){e.$set(e.Register,"szd",t)},expression:"Register.szd"}})],1),i("el-form-item",{attrs:{label:"体温",prop:"tw"}},[i("el-input",{model:{value:e.Register.tw,callback:function(t){e.$set(e.Register,"tw",t)},expression:"Register.tw"}})],1),i("el-form-item",{attrs:{label:"身体状况",prop:"stzk"}},[i("el-input",{model:{value:e.Register.stzk,callback:function(t){e.$set(e.Register,"stzk",t)},expression:"Register.stzk"}})],1),i("el-form-item",{staticClass:"ellabel",staticStyle:{"line-height":"20px"},attrs:{label:"是否与感染者接触",prop:"grjc"}},[i("el-input",{model:{value:e.Register.grjc,callback:function(t){e.$set(e.Register,"grjc",t)},expression:"Register.grjc"}})],1),i("el-form-item",{attrs:{label:"近14天",prop:"fourteenDay"}},[i("el-input",{model:{value:e.Register.fourteenDay,callback:function(t){e.$set(e.Register,"fourteenDay",t)},expression:"Register.fourteenDay"}})],1),i("el-form-item",{attrs:{label:"备注说明",prop:"bz"}},[i("el-input",{model:{value:e.Register.bz,callback:function(t){e.$set(e.Register,"bz",t)},expression:"Register.bz"}})],1),i("el-form-item",{attrs:{label:"创建时间",prop:"createTime"}},[i("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"选择日期时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Register.createTime,callback:function(t){e.$set(e.Register,"createTime",t)},expression:"Register.createTime"}})],1)],1),i("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.updateRegister}},[e._v("确 定")])],1),i("el-dialog",{attrs:{visible:e.addDivideVisible,title:"添加数据",width:"35%"},on:{"update:visible":function(t){e.addDivideVisible=t},close:e.closeAddDivideDialog}},[i("el-form",{ref:"addFormRef",staticClass:"demo-user",attrs:{model:e.Divide,rules:e.mobileFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"姓名",prop:"username"}},[i("el-input",{model:{value:e.Divide.username,callback:function(t){e.$set(e.Divide,"username",t)},expression:"Divide.username"}})],1),i("el-form-item",{attrs:{label:"电话：",prop:"mobile"}},[i("el-input",{model:{value:e.Divide.mobile,callback:function(t){e.$set(e.Divide,"mobile",t)},expression:"Divide.mobile"}})],1),i("el-form-item",{attrs:{label:"隔离地点：",prop:"area"}},[i("el-input",{model:{value:e.Divide.area,callback:function(t){e.$set(e.Divide,"area",t)},expression:"Divide.area"}})],1),i("el-form-item",{attrs:{label:"体温：",prop:"tw"}},[i("el-input",{staticStyle:{width:"100px",float:"left"},model:{value:e.Divide.tw,callback:function(t){e.$set(e.Divide,"tw",t)},expression:"Divide.tw"}}),i("div",{staticStyle:{float:"left"}},[e._v("°C")])],1),i("el-form-item",{staticStyle:{float:"left"},attrs:{label:"症状1："}},[i("el-checkbox",{attrs:{prop:"status1","true-label":"咳嗽："},model:{value:e.Divide.status1,callback:function(t){e.$set(e.Divide,"status1",t)},expression:"Divide.status1"}},[e._v("咳嗽")])],1),i("el-form-item",{staticStyle:{float:"left"},attrs:{label:"症状2："}},[i("el-checkbox",{attrs:{prop:"status2","true-label":"感冒"},model:{value:e.Divide.status2,callback:function(t){e.$set(e.Divide,"status2",t)},expression:"Divide.status2"}},[e._v("感冒")])],1),i("el-form-item",{staticStyle:{float:"left"},attrs:{label:"症状3："}},[i("el-checkbox",{staticStyle:{float:"left"},attrs:{prop:"status3","true-label":"发烧"},model:{value:e.Divide.status3,callback:function(t){e.$set(e.Divide,"status3",t)},expression:"Divide.status3"}},[e._v("发烧")])],1),i("el-form-item",{attrs:{label:"备注：",prop:"bz"}},[i("el-input",{model:{value:e.Divide.bz,callback:function(t){e.$set(e.Divide,"bz",t)},expression:"Divide.bz"}})],1),i("el-form-item",{attrs:{label:"隔离日期：",prop:"createTime"}},[i("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"选择日期时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Divide.createTime,callback:function(t){e.$set(e.Divide,"createTime",t)},expression:"Divide.createTime"}})],1)],1),i("el-button",{on:{click:function(t){e.addDivideVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.ConfirmAddDivide}},[e._v("确 定")])],1)],1)},l=[],a=(i(1703),{name:"Register",data(){const e=(e,t,i)=>{const s=/^1[345789]\d{9}$/;if(s.test(t))return i();i(new Error("请输入合法的手机号码"))};return{tableChecked:[],id:null,ids:[],queryInfo:{username:"",pageNum:1,pageSize:5},total:0,RegisterList:[],Register:{phone:""},addVisible:!1,editVisible:!1,addDivideVisible:!1,Divide:{},mobileFormRules:{phone:[{validator:e,trigger:"blur"}]}}},methods:{headClass(){return"text-align:center"},rowClass(){return"text-align:center"},rowStyle({row:e}){if("是"===e.grjc)return{backgroundColor:"#FFE5EB"}},handleSelectionChange(e){this.tableChecked=e},getRegisterList(){this.$axios.get("/admin/register/registerList",{params:this.queryInfo}).then((e=>{void 0!==e.data.data.total?1e4===e.data.status?(this.total=e.data.data.total,this.RegisterList=e.data.data.list,this.$message.success("请求健康登记表成功!")):this.$message.error("请求健康登记表失败！"):1e4===e.data.status?(this.total=1,this.RegisterList=[],this.RegisterList.push(e.data.data),this.$message.success("搜索成功！")):this.$message.error("搜索失败！")}))},handleSizeChange(e){this.queryInfo.pageSize=e,this.getRegisterList()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getRegisterList()},closeAddDialog(){this.$refs.addFormRef.resetFields()},addRegister(){this.$refs["addFormRef"].validate((e=>{if(!e)return alert("请输入正确的信息！");this.$axios.post("/register/add",this.Register).then((e=>{1e4===e.data.status?(this.addVisible=!this.addVisible,this.$message.success("新增记录成功！"),this.getRegisterList()):(this.addVisible=!this.addVisible,this.$message.error("新增记录失败！"))}))}))},editRegister(e){this.Register=e,this.editVisible=!this.editVisible},updateRegister(){this.$refs["editFormRef"].validate((e=>{if(!e)return alert("请输入正确的信息！");this.$axios.post("/register/update",this.Register).then((e=>{1e4===e.data.status?(this.$message.success("修改记录成功！"),this.editVisible=!this.editVisible,this.getRegisterList()):(this.editVisible=!this.editVisible,this.$message.error("修改记录失败！"))}))}))},closeEditDialog(){this.$refs.editFormRef.resetFields()},deleteRegister(e){this.$confirm("此操作将永久删除该用户, 是否继续?","删除用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.post("/admin/register/delete/"+e).then((e=>{1e4===e.data.status?(this.$message.success("删除用户成功！"),this.getRegisterList()):this.$message.error("删除用户失败！")}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},batchDelete(e){e.forEach(((e,t)=>{this.ids.push(e.id)})),console.log(this.ids,"删除的id"),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((()=>{this.$axios.post("/admin/register/batchDelete",this.ids).then((e=>{1e4!==e.data.status&&this.$message.error("删除失败！"),this.$message({type:"success",message:"删除成功!"}),this.getRegisterList(),console.log("删除了",this.ids),this.ids=[]})).catch((e=>{this.$message({type:"info",message:"已取消删除"})}))}))},addDivide(e){this.addDivideVisible=!0,this.Divide.username=e.name,this.Divide.mobile=e.phone,this.id=e.id},ConfirmAddDivide(){this.Divide.tw=this.Divide.tw+"°C",console.log(this.Divide),this.$axios.post("/divide/add",this.Divide).then((e=>{1e4===e.data.status?this.$axios.post("/admin/register/delete/"+this.id).then((e=>{1e4===e.data.status?(this.$message.success("转移成功！"),this.getRegisterList()):(this.$message.error("转移失败！删除出错"),this.getRegisterList())})):(this.$message.error("转移失败！添加到隔离人员失败！"),this.getRegisterList()),this.addDivideVisible=!1}))},closeAddDivideDialog(){this.$refs.addFormRef.resetFields()}},created(){this.getRegisterList()}}),r=a,o=i(1001),n=(0,o.Z)(r,s,l,!1,null,"1d1bce3e",null),c=n.exports}}]);
//# sourceMappingURL=736.55c1ae0a.js.map