"use strict";(self["webpackChunkepidemic_management_vue"]=self["webpackChunkepidemic_management_vue"]||[]).push([[326],{2326:function(t,e,o){o.r(e),o.d(e,{default:function(){return r}});var l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),o("el-breadcrumb-item",[t._v("物资储备")]),o("el-breadcrumb-item",{attrs:{to:{path:"/goods"}}},[t._v("物资列表")])],1),o("el-card",[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:8}},[o("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:this.getGoodsList},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchGoods},slot:"append"})],1)],1),o("el-col",{attrs:{span:5}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addVisible=!0}}},[t._v("添加数据")]),o("el-button",{attrs:{type:"danger"}},[t._v("批量删除")])],1)],1),o("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":t.rowClass,data:t.goodsList,"header-cell-style":t.headClass,border:""},on:{"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{label:"序号",type:"index",width:"45px"}}),o("el-table-column",{attrs:{label:"商品名称",prop:"title",width:"150px"}}),o("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"描述",prop:"describes"}}),o("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{placement:"top-start",title:"",trigger:"hover"}},[o("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.row.image,alt:""}}),o("img",{staticStyle:{width:"30px",height:"30px"},attrs:{slot:"reference",src:t.row.image},slot:"reference"})])]}}])}),o("el-table-column",{attrs:{label:"交易数量",prop:"count",width:"100px"}}),o("el-table-column",{attrs:{label:"剩余数量",prop:"delCount",width:"100px"}}),o("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-start"}},[o("el-button",{attrs:{circle:"",icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(o){return t.editGood(e.row)}}})],1),o("el-tooltip",{staticClass:"item",attrs:{content:"删除",effect:"dark",placement:"top-start"},on:{click:function(o){return t.deleteGood(e.row.goodsId)}}},[o("el-button",{attrs:{circle:"",icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(o){return t.deleteGood(e.row.goodsId)}}})],1)]}}])})],1),o("el-pagination",{attrs:{"current-page":this.pageNum,"page-size":this.pageSize,"page-sizes":[5,8,10,12,15],total:this.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),o("el-dialog",{attrs:{visible:t.addVisible,title:"增加数据",width:"35%"},on:{"update:visible":function(e){t.addVisible=e},close:t.closeAddDialog}},[o("el-form",{ref:"addFormRef",staticClass:"demo-Good",attrs:{"label-width":"100px"},model:{value:t.Good,callback:function(e){t.Good=e},expression:"Good"}},[o("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[o("el-input",{model:{value:t.Good.title,callback:function(e){t.$set(t.Good,"title",e)},expression:"Good.title"}})],1),o("el-form-item",{attrs:{label:"描述",prop:"describes"}},[o("el-input",{model:{value:t.Good.describes,callback:function(e){t.$set(t.Good,"describes",e)},expression:"Good.describes"}})],1),o("el-form-item",{attrs:{label:"交易数量",prop:"count"}},[o("el-input",{model:{value:t.Good.count,callback:function(e){t.$set(t.Good,"count",e)},expression:"Good.count"}})],1),o("el-form-item",{attrs:{label:"剩余数量",prop:"delCount"}},[o("el-input",{model:{value:t.Good.delCount,callback:function(e){t.$set(t.Good,"delCount",e)},expression:"Good.delCount"}})],1),o("el-form-item",{attrs:{label:"选择图片"}},[o("el-upload",{staticStyle:{float:"left"},attrs:{"auto-upload":!1,limit:1,"on-change":t.handListChange,action:"","list-type":"picture-card"}},[o("i",{staticClass:"el-icon-plus"})])],1)],1),o("el-button",{on:{click:function(e){t.addVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.confirmAdd}},[t._v("确 定")])],1),o("el-dialog",{attrs:{visible:t.editVisible,title:"修改数据",width:"35%"},on:{"update:visible":function(e){t.editVisible=e},close:t.closeAddDialog}},[o("el-form",{ref:"addFormRef",staticClass:"demo-Good",attrs:{model:t.Good,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[o("el-input",{model:{value:t.Good.title,callback:function(e){t.$set(t.Good,"title",e)},expression:"Good.title"}})],1),o("el-form-item",{attrs:{label:"描述",prop:"describes"}},[o("el-input",{model:{value:t.Good.describes,callback:function(e){t.$set(t.Good,"describes",e)},expression:"Good.describes"}})],1),o("el-form-item",{attrs:{label:"交易数量",prop:"count"}},[o("el-input",{model:{value:t.Good.count,callback:function(e){t.$set(t.Good,"count",t._n(e))},expression:"Good.count"}})],1),o("el-form-item",{attrs:{label:"剩余数量",prop:"delCount"}},[o("el-input",{model:{value:t.Good.delCount,callback:function(e){t.$set(t.Good,"delCount",t._n(e))},expression:"Good.delCount"}})],1),o("el-form-item",{attrs:{label:"图片"}},[o("img",{staticStyle:{float:"left",width:"200px",height:"200px"},attrs:{src:t.Good.image,alt:""}})])],1),o("el-button",{on:{click:function(e){t.editVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.confirmUpdate}},[t._v("确 定")])],1)],1)},i=[],a={name:"Goods",data:function(){return{addVisible:!1,editVisible:!1,goodsName:"",pageNum:1,pageSize:5,total:null,goodsList:[],Good:{count:"",delCount:null,describes:"",title:""},file:""}},methods:{removeUserItem:function(t){},handleSelectionChange:function(t){},headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},getGoodsList:function(){var t=this;this.$axios.get("/goods/getAllPageGoods",{params:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((function(e){var o=e.data.data;t.total=o.total,t.goodsList=o.list}))},handleSizeChange:function(t){this.pageSize=t,this.getGoodsList()},handleCurrentChange:function(t){this.pageNum=t,this.getGoodsList()},closeAddDialog:function(){this.$refs["addFormRef"].resetFields()},handListChange:function(t){var e=new FormData;e.append("file",t.raw),this.file=e},searchGoods:function(){},confirmAdd:function(){var t=this;this.$axios.post("/goods/oosFile/upload",this.file).then((function(e){t.file="",200===e.data.status&&(t.Good.image=e.data.data,console.log(t.Good),t.$axios.post("/goods/add",t.Good).then((function(e){t.$message.success("添加成功！")})))})),this.addVisible=!1},editGood:function(t){console.log(t,"修改商品"),this.Good=t,this.editVisible=!0},confirmUpdate:function(){var t=this;this.$axios.post("/goods/updateByGoodsId",this.Good).then((function(e){1e4===e.data.status&&t.$message.success("修改成功！")})),this.editVisible=!1},closeEditDialog:function(){this.$refs["addFormRef"].resetFields()},deleteGood:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","删除商品",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.get("/goods/deleteByGoodsId",{params:{goodsId:t}}).then((function(t){1e4===t.data.status?(e.$message.success("删除成功！"),e.getGoodsList()):e.$message.error("删除失败")}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}},created:function(){this.getGoodsList()}},s=a,n=o(1001),d=(0,n.Z)(s,l,i,!1,null,"2c73b20a",null),r=d.exports}}]);
//# sourceMappingURL=326-legacy.c3ab288c.js.map