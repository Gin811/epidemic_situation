"use strict";(self["webpackChunkepidemic_management_vue"]=self["webpackChunkepidemic_management_vue"]||[]).push([[495],{7495:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("审核信息管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/leaveApplications"}}},[e._v("外出申请审核")])],1),a("el-card",[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:e.getLeaveList},model:{value:e.queryInfo.username,callback:function(t){e.$set(e.queryInfo,"username",t)},expression:"queryInfo.username"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getLeaveList},slot:"append"})],1)],1),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加数据")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.batchDelete(e.tableChecked)}}},[e._v("批量删除")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":e.rowClass,data:e.LeaveList,"header-cell-style":e.headClass,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"ID",prop:"id",width:"45px"}}),a("el-table-column",{attrs:{label:"姓名",prop:"username",width:"80px"}}),a("el-table-column",{attrs:{label:"电话",prop:"phone",width:"110"}}),a("el-table-column",{attrs:{label:"外出地点",prop:"wcDd",width:"100px"}}),a("el-table-column",{attrs:{label:"外出原因",prop:"wcYy"}}),a("el-table-column",{attrs:{label:"外出时间",prop:"wcTime"}}),a("el-table-column",{attrs:{label:"申请状态",prop:"stu",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":e.activeValue,"inactive-value":e.inactiveValue,"active-text":"已审核","inactive-text":"未审核"},on:{change:function(a){return e.changeStatus(t.row)}},model:{value:t.row.stu,callback:function(a){e.$set(t.row,"stu",a)},expression:"scope.row.stu"}})]}}])}),a("el-table-column",{attrs:{width:"180px",label:"备注说明",prop:"bz"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-start"}},[a("el-button",{attrs:{circle:"",icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return e.editApplication(t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{content:"删除",effect:"dark",placement:"top-start"}},[a("el-button",{attrs:{circle:"",icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.deleteApplication(t.row.id)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-size":e.queryInfo.pageSize,"page-sizes":[5,8,10,12,15],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.addVisible,title:"添加记录",width:"35%"},on:{"update:visible":function(t){e.addVisible=t},close:e.closeAddDialog}},[a("el-form",{ref:"addFormRef",staticClass:"demo-user",attrs:{model:e.LeaveUser,rules:e.mobileFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{model:{value:e.LeaveUser.username,callback:function(t){e.$set(e.LeaveUser,"username",t)},expression:"LeaveUser.username"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{model:{value:e.LeaveUser.phone,callback:function(t){e.$set(e.LeaveUser,"phone",t)},expression:"LeaveUser.phone"}})],1),a("el-form-item",{attrs:{label:"外出地点",prop:"wcDd"}},[a("el-input",{model:{value:e.LeaveUser.wcDd,callback:function(t){e.$set(e.LeaveUser,"wcDd",t)},expression:"LeaveUser.wcDd"}})],1),a("el-form-item",{attrs:{label:"外出原因",prop:"wcYy"}},[a("el-input",{model:{value:e.LeaveUser.wcYy,callback:function(t){e.$set(e.LeaveUser,"wcYy",t)},expression:"LeaveUser.wcYy"}})],1),a("el-form-item",{attrs:{label:"外出时间",prop:"wcTime"}},[a("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"外出时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.LeaveUser.wcTime,callback:function(t){e.$set(e.LeaveUser,"wcTime",t)},expression:"LeaveUser.wcTime"}})],1),a("el-form-item",{attrs:{label:"申请状况",prop:"stu"}},[a("el-input",{model:{value:e.LeaveUser.stu,callback:function(t){e.$set(e.LeaveUser,"stu",t)},expression:"LeaveUser.stu"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"bz"}},[a("el-input",{model:{value:e.LeaveUser.bz,callback:function(t){e.$set(e.LeaveUser,"bz",t)},expression:"LeaveUser.bz"}})],1)],1),a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addLeave}},[e._v("确 定")])],1),a("el-dialog",{attrs:{visible:e.editVisible,title:"编辑外出申请",width:"35%"},on:{"update:visible":function(t){e.editVisible=t},close:e.closeEditDialog}},[a("el-form",{ref:"editFormRef",staticClass:"demo-user",attrs:{model:e.LeaveUser,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.LeaveUser.username,callback:function(t){e.$set(e.LeaveUser,"username",t)},expression:"LeaveUser.username"}})],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{attrs:{disabled:""},model:{value:e.LeaveUser.phone,callback:function(t){e.$set(e.LeaveUser,"phone",t)},expression:"LeaveUser.phone"}})],1),a("el-form-item",{attrs:{label:"外出地点",prop:"wcDd"}},[a("el-input",{model:{value:e.LeaveUser.wcDd,callback:function(t){e.$set(e.LeaveUser,"wcDd",t)},expression:"LeaveUser.wcDd"}})],1),a("el-form-item",{attrs:{label:"外出时间",prop:"wcTime"}},[a("el-date-picker",{staticStyle:{float:"left"},attrs:{disabled:"",placeholder:"选择日期时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.LeaveUser.wcTime,callback:function(t){e.$set(e.LeaveUser,"wcTime",t)},expression:"LeaveUser.wcTime"}})],1),a("el-form-item",{attrs:{label:"申请状态",prop:"stu"}},[a("el-input",{staticStyle:{float:"left"},model:{value:e.LeaveUser.stu,callback:function(t){e.$set(e.LeaveUser,"stu",t)},expression:"LeaveUser.stu"}}),a("el-radio-group",{staticStyle:{float:"left"},attrs:{size:"small"},model:{value:e.LeaveUser.stu,callback:function(t){e.$set(e.LeaveUser,"stu",t)},expression:"LeaveUser.stu"}},[a("el-radio-button",{attrs:{label:"已审核"}}),a("el-radio-button",{attrs:{label:"未审核"}})],1)],1)],1),a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateStu}},[e._v("确 定")])],1)],1)},l=[],i=(a(4916),a(7601),a(1703),a(1539),a(4747),{name:"Leave",data:function(){var e=function(e,t,a){var s=/^1[345789]\d{9}$/;if(s.test(t))return a();a(new Error("请输入合法的手机号码"))};return{queryInfo:{username:"",pageNum:1,pageSize:5},total:0,tableChecked:[],ids:[],LeaveUser:{id:null,username:"",wcTime:"",wcYy:"",wcDd:"",phone:"",stu:"",bz:""},addVisible:!1,activeValue:"已审核",inactiveValue:"未审核",LeaveList:[],editVisible:!1,mobileFormRules:{phone:[{validator:e,trigger:"blur"}]}}},methods:{handleSelectionChange:function(e){this.tableChecked=e},batchDelete:function(e){var t=this;e.forEach((function(e,a){t.ids.push(e.id)})),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.$axios.post("/admin/leave/batchDeleteEgressUser",t.ids).then((function(e){1e4!==e.data.status&&t.$message.error("删除失败！"),t.$message({type:"success",message:"删除成功!"}),t.getLeaveList(),console.log("删除了",t.ids),t.ids=[]})).catch((function(e){t.$message({type:"info",message:"已取消删除"})}))}))},changeStatus:function(e){var t=this;console.log(e),this.$axios.post("/leave/updateUser",e).then((function(e){1e4===e.data.status?(t.$message.success("修改成功！"),t.getLeaveList()):t.$message.error("修改失败!")}))},headClass:function(){return"text-align:center"},rowClass:function(){return"text-align:center"},getLeaveList:function(){var e=this;this.$axios.get("/admin/leave/processingApplications",{params:this.queryInfo}).then((function(t){void 0!==t.data.data.total?1e4===t.data.status?(e.total=t.data.data.total,e.LeaveList=t.data.data.list,e.$message.success("查询列表成功！")):e.$message.error("查询列表失败！"):(e.LeaveList=[],1e4===t.data.status?(e.total=1,e.LeaveList.push(t.data.data),e.$message.success("查询成功！")):e.$message.error("查询失败！"))}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getLeaveList()},handleCurrentChange:function(e){this.queryInfo.pageNum=e,this.getLeaveList()},addLeave:function(){var e=this;this.$refs["addFormRef"].validate((function(t){if(!t)return alert("请输入正确的信息！");e.$axios.post("/leave/addEgressUser",e.LeaveUser).then((function(t){e.$message.success("新增信息成功！"),e.addVisible=!e.addVisible,e.getLeaveList()}))}))},editApplication:function(e){this.editVisible=!this.editVisible,this.LeaveUser=e},closeAddDialog:function(){this.$refs.addFormRef.resetFields()},closeEditDialog:function(){this.$refs.editFormRef.resetFields()},updateStu:function(){var e=this;this.$axios.post("/leave/updateUser",this.LeaveUser).then((function(t){1e4===t.data.status?(e.$message.success("修改成功！"),e.getLeaveList()):e.$message.error("修改失败!")})),this.editVisible=!this.editVisible},deleteApplication:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.get("/admin/leave/deleteEgressUser/"+e).then((function(e){1e4===e.data.status?(t.getLeaveList(),t.$message({type:"success",message:"删除成功!"})):t.$message.error("删除失败！")}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}},created:function(){this.getLeaveList()}}),r=i,n=a(1001),o=(0,n.Z)(r,s,l,!1,null,"37deacec",null),c=o.exports}}]);
//# sourceMappingURL=495-legacy.99b3efe7.js.map