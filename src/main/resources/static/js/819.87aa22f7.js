"use strict";(self["webpackChunkepidemic_management_vue"]=self["webpackChunkepidemic_management_vue"]||[]).push([[819],{8819:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("日常管理")]),r("el-breadcrumb-item",{attrs:{to:{path:"return"}}},[e._v("返回审核记录")])],1),r("el-card",[r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:8}},[r("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:e.getReturnList},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.queryReturnByName(e.userName)}},slot:"append"})],1)],1),r("el-col",{attrs:{span:3}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加申请")])],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.batchDelete(e.tableChecked)}}},[e._v("批量删除")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":e.rowClass,data:e.returnList,"header-cell-style":e.headClass,border:""},on:{"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{label:"id",prop:"id"}}),r("el-table-column",{attrs:{label:"姓名",prop:"userName"}}),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),r("el-table-column",{attrs:{label:"身体状况",prop:"stzk"}}),r("el-table-column",{attrs:{label:"申请内容",prop:"content"}}),r("el-table-column",{attrs:{label:"审核状态",prop:"status"}}),r("el-table-column",{attrs:{width:"180",label:"申请时间时间",prop:"createTime"}}),r("el-table-column",{attrs:{label:"备注",prop:"bz"}}),r("el-table-column",{attrs:{label:"操作",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-start"}},[r("el-button",{attrs:{circle:"",icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(r){return e.editReturn(t.row)}}})],1),r("el-popconfirm",{attrs:{title:"这是一段内容确定删除吗？"},on:{confirm:function(r){return e.removeUserItem(t.row)}}},[r("el-button",{attrs:{slot:"reference",circle:"",icon:"el-icon-delete",size:"mini",type:"danger"},slot:"reference"})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.pageNum,"page-size":e.pageSize,"page-sizes":[5,8,10,12,15],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{visible:e.addVisible,title:"添加记录",width:"40%"},on:{"update:visible":function(t){e.addVisible=t},close:e.closeAddDialog}},[r("el-form",{ref:"addFormRef",staticClass:"demo-user",attrs:{model:e.ReturnUser,rules:e.mobileFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[r("el-input",{model:{value:e.ReturnUser.userName,callback:function(t){e.$set(e.ReturnUser,"userName",t)},expression:"ReturnUser.userName"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[r("el-input",{model:{value:e.ReturnUser.mobile,callback:function(t){e.$set(e.ReturnUser,"mobile",t)},expression:"ReturnUser.mobile"}})],1),r("el-form-item",{attrs:{label:"申请内容",prop:"content"}},[r("el-input",{model:{value:e.ReturnUser.content,callback:function(t){e.$set(e.ReturnUser,"content",t)},expression:"ReturnUser.content"}})],1),r("el-form-item",{attrs:{label:"近14天行程",prop:"fourteenDay"}},[r("el-input",{model:{value:e.ReturnUser.fourteenDay,callback:function(t){e.$set(e.ReturnUser,"fourteenDay",t)},expression:"ReturnUser.fourteenDay"}})],1),r("el-form-item",{attrs:{label:"身体状况",prop:"stzk"}},[r("el-input",{model:{value:e.ReturnUser.stzk,callback:function(t){e.$set(e.ReturnUser,"stzk",t)},expression:"ReturnUser.stzk"}})],1),r("el-form-item",{attrs:{label:"返回时间",prop:"createTime"}},[r("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"返回时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ReturnUser.createTime,callback:function(t){e.$set(e.ReturnUser,"createTime",t)},expression:"ReturnUser.createTime"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"bz"}},[r("el-input",{model:{value:e.ReturnUser.bz,callback:function(t){e.$set(e.ReturnUser,"bz",t)},expression:"ReturnUser.bz"}})],1)],1),r("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.ConfirmAdd}},[e._v("确 定")])],1),r("el-dialog",{attrs:{visible:e.editVisible,title:"添加记录",width:"40%"},on:{"update:visible":function(t){e.editVisible=t},close:e.closeEditDialog}},[r("el-form",{ref:"addFormRef",staticClass:"demo-user",attrs:{model:e.ReturnUser,rules:e.mobileFormRules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[r("el-input",{model:{value:e.ReturnUser.userName,callback:function(t){e.$set(e.ReturnUser,"userName",t)},expression:"ReturnUser.userName"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[r("el-input",{model:{value:e.ReturnUser.mobile,callback:function(t){e.$set(e.ReturnUser,"mobile",t)},expression:"ReturnUser.mobile"}})],1),r("el-form-item",{attrs:{label:"申请内容",prop:"content"}},[r("el-input",{model:{value:e.ReturnUser.content,callback:function(t){e.$set(e.ReturnUser,"content",t)},expression:"ReturnUser.content"}})],1),r("el-form-item",{attrs:{label:"近14天行程",prop:"fourteenDay"}},[r("el-input",{model:{value:e.ReturnUser.fourteenDay,callback:function(t){e.$set(e.ReturnUser,"fourteenDay",t)},expression:"ReturnUser.fourteenDay"}})],1),r("el-form-item",{attrs:{label:"身体状况",prop:"stzk"}},[r("el-input",{model:{value:e.ReturnUser.stzk,callback:function(t){e.$set(e.ReturnUser,"stzk",t)},expression:"ReturnUser.stzk"}})],1),r("el-form-item",{attrs:{label:"返回时间",prop:"createTime"}},[r("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"返回时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.ReturnUser.createTime,callback:function(t){e.$set(e.ReturnUser,"createTime",t)},expression:"ReturnUser.createTime"}})],1),r("el-form-item",{attrs:{label:"备注",prop:"bz"}},[r("el-input",{model:{value:e.ReturnUser.bz,callback:function(t){e.$set(e.ReturnUser,"bz",t)},expression:"ReturnUser.bz"}})],1),r("el-form-item",{attrs:{label:"审核结果",prop:"status"}},[r("el-input",{model:{value:e.ReturnUser.status,callback:function(t){e.$set(e.ReturnUser,"status",t)},expression:"ReturnUser.status"}})],1)],1),r("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.ConfirmEdit}},[e._v("确 定")])],1)],1)},a=[],l=(r(1703),{name:"ReturnApplication",data(){const e=(e,t,r)=>{const s=/^1[345789]\d{9}$/;if(s.test(t))return r();r(new Error("请输入合法的手机号码"))};return{userName:"",pageNum:1,pageSize:5,total:0,addVisible:!1,editVisible:!1,returnList:[],activeValue:"已审核",inactiveValue:"未审核",tableChecked:[],ids:[],ReturnUser:{},mobileFormRules:{mobile:[{validator:e,trigger:"blur"}]}}},methods:{getReturnList(){this.$axios.get("/admin/return/queryReviewed",{params:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((e=>{if(1e4===e.data.status){const t=[],r=e.data.data.list;r.forEach((function(e,r){"已审核"===e.status&&t.push(e)})),this.total=e.data.data.total,this.returnList=t}else this.$message.error("请求数据失败")}))},handleSizeChange(e){this.pageSize=e,this.getReturnList()},handleCurrentChange(e){this.pageNum=e,this.getReturnList()},handleSelectionChange(e){this.tableChecked=e},ConfirmAdd(){console.log(this.ReturnUser,"增加返回申请"),this.$axios.post("/return/add",this.ReturnUser).then((e=>{console.log(e),this.addVisible=!1}))},closeAddDialog(){this.$refs.addFormRef.resetFields()},batchDelete(e){e.forEach(((e,t)=>{this.ids.push(e.id)})),console.log(this.ids),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((()=>{this.$axios.post("/admin/return/batchDelete",this.ids).then((e=>{1e4!==e.data.status&&this.$message.error("删除失败！"),this.$message({type:"success",message:"删除成功!"}),this.getReturnList()})),console.log("删除了",this.ids),this.ids=[]})).catch((e=>{this.$message({type:"info",message:"已取消删除"})}))},queryReturnByName(e){console.log(e,"根据用户名查询"),this.$axios.get("/return/queryByName",{params:{userName:e}}).then((e=>{1e4===e.data.status?(this.returnList=[],this.returnList.push(e.data.data)):this.$message.error("请求数据失败")}))},editReturn(e){this.editVisible=!0,this.ReturnUser=e},ConfirmEdit(){this.$refs.addFormRef.validate((e=>{e?this.$axios.post("/return/update",this.ReturnUser).then((e=>{1e4===e.data.status&&(this.$message.success("更新成功！"),this.editVisible=!1,this.getReturnList())})):alert("请输入正确的信息")}))},closeEditDialog(){this.$refs.addFormRef.resetFields()},removeUserItem(e){console.log("删除申请",e.id),this.$axios.get("/admin/return/delete",{params:{id:e.id}}).then((t=>{1e4===t.data.status&&(console.log("成功删除",e.username,"的信息"),this.getReturnList())}))},headClass(){return"text-align:center"},rowClass(){return"text-align:center"}},created(){this.getReturnList()}}),n=l,i=r(1001),o=(0,i.Z)(n,s,a,!1,null,"85459328",null),u=o.exports}}]);
//# sourceMappingURL=819.87aa22f7.js.map