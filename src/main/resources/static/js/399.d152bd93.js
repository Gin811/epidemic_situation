"use strict";(self["webpackChunkepidemic_management_vue"]=self["webpackChunkepidemic_management_vue"]||[]).push([[399],{5399:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("通知管理")]),a("el-breadcrumb-item",{attrs:{to:{path:"/info"}}},[e._v("通知公告")])],1),a("el-card",[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-input",{ref:"",staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},on:{clear:e.getInfoList},model:{value:e.queryInfo.userName,callback:function(t){e.$set(e.queryInfo,"userName",t)},expression:"queryInfo.userName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getInfoList},slot:"append"})],1)],1),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[e._v("添加公告")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"cell-style":e.rowClass,data:e.InfoList,"header-cell-style":e.headClass,border:""}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"50px"}}),a("el-table-column",{attrs:{label:"姓名",prop:"userName",width:"100px"}}),a("el-table-column",{attrs:{label:"标题",prop:"title"}}),a("el-table-column",{attrs:{label:"内容","show-overflow-tooltip":!0,prop:"content"}}),a("el-table-column",{attrs:{label:"发布时间",prop:"createTime",width:"270px"}}),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{content:"编辑",effect:"dark",placement:"top-start"}},[a("el-button",{attrs:{circle:"",icon:"el-icon-edit",size:"mini",type:"primary"},on:{click:function(a){return e.editInfo(t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{content:"删除",effect:"dark",placement:"top-start"}},[a("el-button",{attrs:{circle:"",icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.deleteInfo(t.row)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageNum,"page-size":e.queryInfo.pageSize,"page-sizes":[5,8,10,12,15],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:e.addVisible,title:"编辑通知",width:"35%"},on:{"update:visible":function(t){e.addVisible=t}}},[a("el-form",{ref:"editInfoFormRef",staticClass:"demo-Info",attrs:{model:e.Info,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{model:{value:e.Info.userName,callback:function(t){e.$set(e.Info,"userName",t)},expression:"Info.userName"}})],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.Info.title,callback:function(t){e.$set(e.Info,"title",t)},expression:"Info.title"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{model:{value:e.Info.content,callback:function(t){e.$set(e.Info,"content",t)},expression:"Info.content"}})],1),a("el-form-item",{attrs:{label:"发布时间",prop:"createTime"}},[a("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"选择日期时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Info.createTime,callback:function(t){e.$set(e.Info,"createTime",t)},expression:"Info.createTime"}})],1)],1),a("el-button",{on:{click:function(t){e.addVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addInfo}},[e._v("确 定")])],1),a("el-dialog",{attrs:{visible:e.editVisible,title:"编辑通知",width:"35%"},on:{"update:visible":function(t){e.editVisible=t},close:e.closeEditDialog}},[a("el-form",{ref:"editInfoFormRef",staticClass:"demo-Info",attrs:{model:e.Info,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.Info.userName,callback:function(t){e.$set(e.Info,"userName",t)},expression:"Info.userName"}})],1),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.Info.title,callback:function(t){e.$set(e.Info,"title",t)},expression:"Info.title"}})],1),a("el-form-item",{attrs:{label:"内容",prop:"content"}},[a("el-input",{model:{value:e.Info.content,callback:function(t){e.$set(e.Info,"content",t)},expression:"Info.content"}})],1),a("el-form-item",{attrs:{label:"发布时间",prop:"createTime"}},[a("el-date-picker",{staticStyle:{float:"left"},attrs:{placeholder:"选择日期时间",size:"large",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.Info.createTime,callback:function(t){e.$set(e.Info,"createTime",t)},expression:"Info.createTime"}})],1)],1),a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateInfo}},[e._v("确 定")])],1)],1)},s=[],l={name:"Info",data(){return{queryInfo:{pageNum:1,pageSize:5,userName:""},InfoList:[],total:0,Info:{createTime:""},editVisible:!1,addVisible:!1}},methods:{headClass(){return"text-align:center"},rowClass(){return"text-align:center"},getInfoList(){""===this.queryInfo.userName?this.$axios.post("/info/queryInfo",this.queryInfo).then((e=>{1e4===e.data.status?(this.InfoList=e.data.data.list,this.total=e.data.data.total,this.$message.success("请求成功！")):this.$message.error("请求失败！")})):this.$axios.post("/info/queryInfoByName",this.queryInfo).then((e=>{console.log(e),this.total=e.data.data.total,this.InfoList=e.data.data.list}))},handleSizeChange(e){this.queryInfo.pageSize=e,this.getInfoList()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getInfoList()},editInfo(e){this.Info=e,this.editVisible=!this.editVisible,console.log(this.Info)},closeEditDialog(){this.$refs["editInfoFormRef"].resetFields()},deleteInfo(e){this.$confirm("此操作将永久删除该用户, 是否继续?","删除用户",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.get("/admin/Info/delete/"+e.id).then((e=>{this.getInfoList(),this.$message.success("删除用户成功！")}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},updateInfo(){this.$axios.post("/admin/Info/update",this.Info).then((e=>{1e4===e.data.status?(this.$message.success("更新成功！"),this.editVisible=!this.editVisible,this.getInfoList()):this.$message.error("更新失败！")}))},addInfo(){this.$axios.post("/admin/Info/addInfo",this.Info).then((e=>{1e4===e.data.status?(this.addVisible=!this.addVisible,this.$message.success("新增成功！"),this.getInfoList()):(this.addVisible=!this.addVisible,this.$message.error("新增失败！"))}))}},created(){this.getInfoList()}},o=l,n=a(1001),r=(0,n.Z)(o,i,s,!1,null,null,null),c=r.exports}}]);
//# sourceMappingURL=399.d152bd93.js.map